(function(j,k){function p(r,s,q){if(typeof s==="number"){s=s.toString()}return"<"+r+(q?" "+q:"")+">"+(typeof s==="string"?(s+"</"+r+">"):"")}function a(y){var u={},s,x="input DOMNodeInserted DOMNodeRemoved DOMCharacterDataModified";function q(){u.text=y.inputElement.html();if(s){clearTimeout(s)}else{y.statusElement.addClass("typing")}s=setTimeout(u.save,y.saveDelay)}function t(){y.inputElement.off(x);y.inputElement.html(u.text);y.lengthElement.html(u.length);y.inputElement.on(x,q);return u}u.redraw=t;function w(){var A;try{A=JSON.parse(localStorage.getItem(y.name));if(Object.keys(A).length===2&&typeof A.text==="string"&&typeof A.length==="number"){u.length=A.length;u.text=A.text}}catch(z){u.length=0;u.text=""}return u.redraw()}u.load=w;function v(){if(y.name){localStorage.setItem(y.name,JSON.stringify({length:u.length,text:u.text}))}if(s){s=undefined;y.statusElement.removeClass("typing")}y.statusElement.addClass("saved");setTimeout(function(){y.statusElement.removeClass("saved")},y.msgDelay);return u}u.save=v;function r(A,z){if(typeof z==="number"){u.length=z}if(typeof A==="string"){u.text=A}return u.redraw()}u.set=r;y.inputElement.on("focusout",function(){if(s){u.save()}});return u.load()}function e(q){var r=e.proto;if(!r){r=e.proto={load:function(){var s,t;if(typeof q!=="string"){return this}s=JSON.parse(localStorage.getItem(q));if(typeof s!=="object"){return this}for(t in s){if(s.hasOwnProperty(t)){this[t]=s[t]}}for(t in this){if(this.hasOwnProperty(t)){if(!s[t]){delete this[t]}}}return this},save:function(){if(q){localStorage.setItem(q,JSON.stringify(this))}return this},set:function(s,u,t){if(!this[s]){this[s]={}}if(this[s][u]!==t){this[s][u]=t;this.save()}return this},get:function(s,t){return this[s]?this[s][t]:undefined},keys:function(){return Object.keys(this)}}}return Object.create(r).load()}var l=(function(){var q,t,r={adv:true,conj:true,excl:true,n:true,name:true,num:true,pro:true,ques:true,v:true,"":true},u={adv:"adv",advs:"adv",conj:"conj",excl:"excl",name:"name",n:"n",ns1:"n",ns2:"n",ns3:"n",ns4:"n",ns5:"n",num:"num",num1:"num",num2:"num",pro:"pro",ques:"ques",v:"v",vs1:"v",vs2:"v",vs3:"v",vs4:"v",vs5:"v",vs6:"v",vs7:"v",vs8:"v",vs9:"v",vs9n:"n",vsr:"v",num2n:"n"};function s(w){var v=Object.prototype.toString.call(w).slice(8,-1);if(v!=="String"){throw new TypeError("Function splitSyllable must be called on string (not "+v.toLowerCase()+")")}return w.split(/(?=(?:[bDHjlmnpqQrStvwy\']|ch|gh|ng|tlh)[aeIou])/)}q={getText:function(){return this.text},setText:function(w,v){if(w===this.text){return this}this.text=w;this.setTags(v||[]);return this},addTag:function(w){if(Object.prototype.toString.call(w)!=="[object Array]"){throw new TypeError("Argument must be array")}var v=this.tags;w.forEach(function(x){if(v.indexOf(x)===-1){v.push(x)}});return this},getTags:function(v){var w=this;if(v===undefined){return w.tags}if(Object.prototype.toString.call(v)!=="[object Array]"){throw new TypeError("Argument must be array")}return v.filter(function(x){return(w.tags.indexOf(x)>=0)})},hasTag:function(v){if(Object.prototype.toString.call(v)!=="[object Array]"){throw new TypeError("Argument must be array")}var w=this;return v.some(function(x){return(w.tags.indexOf(x)>=0)})},setTags:function(v){this.tags=[];return this.addTag(v)}};t=Object.create(q);(function(w){function x(C,D,y){var B=C[0],A=C.slice(1),z=y.parts[y.parts.length-1],E;if(!B){return(z.pos?y:null)}if(!D||!D[B]){return null}E=D[B].tag;if(z&&(!z.pos||z.pos===E)){z.pos=E;z.text+=B}else{z={pos:E,text:B};y.parts.push(z)}if(r[E]&&y.root!==z){if(y.root){throw new RangeError("Root part-of-speech already set Tried to set it to "+JSON.stringify(z)+", but it's already set to "+JSON.stringify(y.root)+".")}y.root=z}return x(A,D[B].rules,y)}function v(B,C){var A=s(B.replace(/[\u2018\u2019]/g,"'")),z=A[0],y=[];if(C[z]){C[z].forEach(function(E){var D,F={};F[z]=E;D=x(A,F,{parts:[]});if(D&&!D.root){D.root={}}if(D){y.push(D)}})}return y}w.getSyllable=function(z,y){return this.syllables.slice(z,y).map(function(A){return A.text})};w.addRoot=function(A,B){var y,z=Object.prototype.toString.call(A).slice(8,-1);if(z!=="Array"){throw new TypeError("Method addRoot must be called on array (not "+z.toLowerCase()+")")}if(!this.roots){this.roots={}}if(!this.roots[A]){this.roots[A]=B}else{y=this.roots[A];B.forEach(function(C){if(y.indexOf(C)===-1){y.push(C)}})}};w.setText=function(z,A){var y=this;if(z===this.text){return this}this.text=z;this.parts=v(z,A);this.setTags(this.parts.map(function(B){return u[B.parts[B.parts.length-1].pos]}));this.roots={};this.parts.forEach(function(B){y.roots[B.root.text]=[B.root.pos]});return this}}(t));return{string:function(x,v){var w=Object.create(q);return w.setText(x||"",v||[])},word:function(x,w){var v=Object.create(t);return v.setText(x||"",w||{})}}}());function g(q,A){var u={},s=[],w={},t={adverbial:"adv",conjunction:"conj",exclamation:"excl",name:"name",noun:"n","noun suffix type 1":"ns1","noun suffix type 2":"ns2","noun suffix type 3":"ns3","noun suffix type 4":"ns4","noun suffix type 5":"ns5",numeral:"num",pronoun:"pro","question word":"ques",verb:"v","verb prefix":"vp","verb suffix type 1":"vs1","verb suffix type 2":"vs2","verb suffix type 3":"vs3","verb suffix type 4":"vs4","verb suffix type 5":"vs5","verb suffix type 6":"vs6","verb suffix type 7":"vs7","verb suffix type 8":"vs8","verb suffix type 9":"vs9","verb suffix type rover":"vsr"};if(!q){throw new Error("No dictionary URL specified")}function r(C){var B=-1;C=C.replace(/^[\s\S]*\n=== start-of-word-list ===\n+/,"");C=C.replace(/\n+=== end-of-word-list ===\n[\s\S]*$/,"");C=C.replace(/\n\t/g," ");return C.split(/\n{2,}/).map(function(E){var F={num:(B+=1)},D=1;E.split(/\n/).forEach(function(G){var H=G.match(/^(\w*):\s+([^]*)/),J=H[1],I=H[2];if(J==="cite"){J=J+"-"+D;D+=1}F[J]=I});return F})}function z(B,C,F,E){var D=C.id;B.id[D]=B.id[D]||{};B.id[D][""]=B.id[D][""]||[];B.id[D][""].push(C);B.tlh[F]=B.tlh[F]||{};B.tlh[F][""]=B.tlh[F][""]||[];B.tlh[F][""].push(C);B.tlh[F].pos=B.tlh[F].pos||{};B.tlh[F].pos[E]=B.tlh[F].pos[E]||{};B.tlh[F].pos[E][""]=B.tlh[F].pos[E][""]||[];B.tlh[F].pos[E][""].push(C);B.pos[E]=B.pos[E]||{};B.pos[E][""]=B.pos[E][""]||[];B.pos[E][""].push(C);B.pos[E].tlh=B.pos[E].tlh||{};B.pos[E].tlh[F]=B.pos[E].tlh[F]||{};B.pos[E].tlh[F][""]=B.pos[E].tlh[F][""]||[];B.pos[E].tlh[F][""].push(C)}function x(C){var B={pos:{},tlh:{},id:{}};C.forEach(function(D){var F=(D.tlh.match(/\{(.*?)\}/))[1],E=t[D.pos];z(B,D,F,E)});return B}function y(E){var H=(E||{}).pos,G=(E||{}).tlh,F=(E||{}).id,D=(E||{}).num,B;try{if(F){return w.id[F][""]}if(D!==undefined){B=s[D<0?s.length+D:D];return B?[B]:[]}if(H){if(t[H]){H=t[H]}return G?w.pos[H].tlh[G][""]:w.pos[H][""]}if(G){return w.tlh[G][""]}return s}catch(C){return[]}}u.query=y;function v(){return w}u.index=v;fetch(q).then(function(B){return B.text()}).then(function(B){s=r(B);w=x(s);if(A){A(u)}});return u}var f=(function(){var v,r,u={adv:"adv",advs:"adv",conj:"conj",excl:"excl",name:"name",n:"n",ns1:"n",ns2:"n",ns3:"n",ns4:"n",ns5:"n",num:"num",num1:"num",num2:"num",pro:"pro",ques:"ques",v:"v",vs1:"v",vs2:"v",vs3:"v",vs4:"v",vs5:"v",vs6:"v",vs7:"v",vs8:"v",vs9:"v",vs9n:"n",vsr:"v",num2n:"n"};function t(y){var x=Object.prototype.toString.call(y).slice(8,-1);if(x!=="String"){throw new TypeError("Function splitSyllable must be called on string (not "+x.toLowerCase()+")")}return y.split(/(?=(?:[bDHjlmnpqQrStvwy\']|ch|gh|ng|tlh)[aeIou])/)}function q(){return Object.create(v)}v={addRule:function(D,z,E,y){var C=D[0],A=D.slice(1),B="";y=y||D.join("");if(this[C]){if(A.length===0){B=u[this[C].tag];if(B!==z){throw new RangeError("Rule already exists for {"+y+"}. Tried to tag as '"+z+"', but it's already tagged '"+this[C].tag+"'.")}return this}}else{this[C]={};if(A.length===0){this[C].tag=z;if(E){this[C].rules=E}return this}this[C].rules=q()}this[C].rules.addRule(A,z,E,y);return this},addRules:function(x,z){var y=this;Object.keys(x).forEach(function(A){y.addRule(t(A),x[A],z)});return this}};function w(){return Object.create(r)}r=Object.create(v);(function(x){x.addRule=function(C,y,D){var B=C[0],A=C.slice(1),z=null;if(this[B]){(function(){}())}else{this[B]=[]}if(z===null){z=this[B].length;this[B].push({})}if(A.length===0){this[B][z].tag=y;if(D){this[B][z].rules=D}return this}this[B][z].rules=this[B][z].rules||q();this[B][z].rules.addRule(A,y,D);return this}}(r));function s(y){var x=q(),H=q(),L=q(),F=q(),J=q(),B=w(),z={adverbial:"adv",conjunction:"conj",exclamation:"excl",name:"name",noun:"n","noun suffix type 1":"ns1","noun suffix type 2":"ns2","noun suffix type 3":"ns3","noun suffix type 4":"ns4","noun suffix type 5":"ns5",numeral:"num",pronoun:"pro","question word":"ques",verb:"v","verb prefix":"vp","verb suffix type 1":"vs1","verb suffix type 2":"vs2","verb suffix type 3":"vs3","verb suffix type 4":"vs4","verb suffix type 5":"vs5","verb suffix type 6":"vs6","verb suffix type 7":"vs7","verb suffix type 8":"vs8","verb suffix type 9":"vs9","verb suffix type rover":"vsr"},D={bI:"vp",bo:"vp",che:"vp",cho:"vp",Da:"vp",DI:"vp",Du:"vp",gho:"vp",HI:"vp",jI:"vp",ju:"vp",lI:"vp",lu:"vp",ma:"vp",mu:"vp",nI:"vp",nu:"vp",pe:"vp",pI:"vp",qa:"vp",re:"vp",Sa:"vp",Su:"vp",tI:"vp",tu:"vp",vI:"vp",wI:"vp",yI:"vp"},G={"'egh":"vs1",chuq:"vs1",nIS:"vs2",qang:"vs2",rup:"vs2",beH:"vs2",vIp:"vs2",choH:"vs3","qa'":"vs3",moH:"vs4","lu'":"vs5",laH:"vs5","chu'":"vs6",bej:"vs6","law'":"vs6","ba'":"vs6","pu'":"vs7","ta'":"vs7",taH:"vs7","lI'":"vs7",neS:"vs8","DI'":"vs9",chugh:"vs9","pa'":"vs9",vIS:"vs9",bogh:"vs9",meH:"vs9","mo'":"vs9","'a'":"vs9",jaj:"vs9","be'":"vsr","Qo'":"vsr","Ha'":"vsr","qu'":"vsr"},K={"wI'":"vs9n",ghach:"vs9n"},C={"'a'":"ns1",Hom:"ns1","'oy":"ns1",oy:"ns1","pu'":"ns2","Du'":"ns2",mey:"ns2",qoq:"ns3",Hey:"ns3","na'":"ns3",wIj:"ns4","wI'":"ns4",maj:"ns4","ma'":"ns4",lIj:"ns4","lI'":"ns4",raj:"ns4","ra'":"ns4",Daj:"ns4",chaj:"ns4",vam:"ns4",vetlh:"ns4",Daq:"ns5","vo'":"ns5","mo'":"ns5",vaD:"ns5","'e'":"ns5"},A={"wa'":"num","cha'":"num",wej:"num",loS:"num",vagh:"num",jav:"num",Soch:"num",chorgh:"num",Hut:"num",maH:"num1",vatlh:"num1",SaD:"num1",netlh:"num1",bIp:"num1","'uy'":"num1",DIch:"num2",logh:"num2",leS:"num2n","Hu'":"num2n",SanID:"num1"},E={"Ha'":"advs"},I={adv:J,name:H,n:H,pro:x,v:x,vp:F};x.addRules(G,x).addRules(K,H);H.addRules(C,H);L.addRules(A,L);J.addRules(E);B.addRules(D,F);y.query().map(function(N){var P=(N.tlh.match(/\{(.*?)\}/))[1],O=z[N.pos],M=t(P);if(!P.match(/[ ]/)){if(O==="v"){F.addRule(M,O,x)}if(O==="pro"){B.addRule(M,O,H)}B.addRule(M,O,I[O])}});B.addRules(A,L);return B}return function(x){return s(x)}}());function n(C){var t={},s={length:0};function w(D,E){if(D instanceof Array){D.forEach(function(F){if(F.id){E(F)}})}}function B(D){var E=D&&D.id;return E&&t[E]?t[E]:0}s.count=B;function r(E,D){return E.num-D.num}function y(){var I,G,F,D,H=C.dict,E=[];for(I in t){if(t.hasOwnProperty(I)){D=H.query({id:I})[0];F={};for(G in D){if(D.hasOwnProperty(G)){F[G]=D[G]}}F.count=t[I];E.push(F)}}return E.sort(r)}s.get=y;function u(D){return !!t[D.id]}s.has=u;function v(E,D){var F=C.dict;w(E,function(I){var G,J=I.id,H=I.count||1;if(t[J]){t[J]+=H}else{G=F.query({id:J})[0];if(G){t[J]=H;s.length+=1}}});return D?s:s.save()}s.add=v;function x(){s.length=0;t={};return s}s.clear=x;function q(){var E=C.name;if(E){try{t=JSON.parse(localStorage.getItem(E));s.length=Object.keys(t).length}catch(D){s.clear()}}return s}s.load=q;function A(D){w(D,function(E){var F=E&&E.id;if(F&&t[F]){s.length-=1;delete t[F]}});return s.save()}s.remove=A;function z(){var D=C.name;if(D){localStorage.setItem(D,JSON.stringify(t))}return s}s.save=z;return s.load()}$(function(){var q="",u=$("select.lang"),s="language",t=localStorage.getItem(s);function r(v){if(v!==q){$(k.body).attr("data-lang",v);localStorage.setItem(s,v);q=v}}r(t||"en");u.val(t);u.on("change",function(){r(this.value)})});function i(q){var r,t;function s(x,w){var u=x.length-(w||0),v=Math.floor(Math.random()*u);if(u<1){return undefined}return x.splice(v,1).pop()}t={count:function(){return this.main.length+this.loop.length},reset:function(u){this.main=u;this.loop=[];return this},get:function(){if(this.loop.length>=this.loopSize){return s(this.loop,this.skipSize)}if(this.main.length>0){return s(this.main)}if(this.loop.length>this.skipSize){return s(this.loop,this.skipSize)}if(this.loop.length>1){return s(this.loop,1)}return this.loop.pop()},put:function(u){this.loop.push(u);if(this.loop.length>this.loopSize){this.main.push(s(this.loop))}return this},size:function(u){if(arguments.length===0){return this.loopSize}this.loopSize=(typeof u==="number"?u:10);return this},skip:function(u){if(arguments.length===0){return this.skipSize}this.skipSize=(typeof u==="number"?u:3);return this}};r=Object.create(t);return r.reset(q).size(null).skip(null)}function d(A){var q,u=i(),z=3,P=3,I={buttonElements:$("section.practice button"),questionCell:$("section.practice td.question"),answerCell:$("section.practice td.answer"),table:$("section.practice table.glossary"),tab:$('nav.pagetabs [href="#practice"]'),showCell:$("section.practice td.show"),replyCell:$("section.practice td.reply"),helpElement:$("section.practice .help"),pointElement:$("section.practice span.point"),maxPointElement:$("section.practice .maxpoint"),pointMeter:$("section.practice progress.point"),pointMeter2:$("section.practice progress.b"),occurElement:$("section.practice .occur")},B={conjunction:{sv:"konjunktion"},exclamation:{sv:"interjektion"},name:{sv:"namn"},noun:{sv:"substantiv"},"noun suffix type 1":{sv:"substantivsuffix typ 1"},"noun suffix type 2":{sv:"substantivsuffix typ 2"},"noun suffix type 3":{sv:"substantivsuffix typ 3"},"noun suffix type 4":{sv:"substantivsuffix typ 4"},"noun suffix type 5":{sv:"substantivsuffix typ 5"},numeral:{sv:"räkneord"},pronoun:{sv:"pronomen"},"question word":{sv:"frågeord"},"verb prefix":{sv:"verbprefix"},"verb suffix type 1":{sv:"verbsuffix typ 1"},"verb suffix type 2":{sv:"verbsuffix typ 2"},"verb suffix type 3":{sv:"verbsuffix typ 3"},"verb suffix type 4":{sv:"verbsuffix typ 4"},"verb suffix type 5":{sv:"verbsuffix typ 5"},"verb suffix type 6":{sv:"verbsuffix typ 6"},"verb suffix type 7":{sv:"verbsuffix typ 7"},"verb suffix type 8":{sv:"verbsuffix typ 8"},"verb suffix type 9":{sv:"verbsuffix typ 9"},"verb suffix type rover":{sv:"verbsuffix typ strövare"}},w=e("practice");A={glossary:A.glossary,known:A.known,dict:A.dict};function N(R){return R.replace(/\'/g,"’")}function K(R){return R.replace(/[<>«»]/g,"")}function D(S){var R=S.tlh.match(/[^\{]+(?=\})/)[0];return p("b",N(R),"lang=tlh")}function C(T){var S=T.tlh.match(/[^\{]+(?=\})/)[0],R=A.dict.query({tlh:S,pos:T.pos});return["en","sv"].map(function(W){var V,U=R.map(function(X){var Y=N(K(X[W]));return p("i",Y)});if(U.length>1){V=0;U=U.map(function(X){V+=1;return V+". "+X+p("br")});V=U.join("")}else{V=U[0]}return p("span",V,"lang="+W)}).join("")}function x(S,R){return R==="tlh"?D(S):C(S)}function Q(T){var R={37:"left",39:"right",48:"0",49:"1",50:"2",51:"3"},S=R[T.which];if(S){T.preventDefault();if(S==="left"||S==="right"){$("button:focus")[S==="left"?"prev":"next"]().focus();return}if(S==="1"){$("button.fail").trigger("click")}if(S==="2"){$("button.hard").trigger("click")}if(S==="3"){$("button.easy").trigger("click")}if(S==="0"){$("button.known").trigger("click")}}}function M(X){var S=X.id,Z=w.get(S,"point")||0,Y=z+P,T=B[X.pos]||{},R=X.tlh.match(/[^\{]+(?=\})/)[0],W=A.dict.query({tlh:R,pos:X.pos}).length,U=Z<P?"tlh":"en",V=x(X,U);V+=" ("+p("span",X.pos,"lang=en")+p("span",T.sv||X.pos,"lang=sv")+")";if(W>1&&U==="tlh"){V+=p("br")+"("+W+p("span"," meanings","lang=en")+p("span"," betydelser","lang=sv")+")"}I.questionCell.html(V);I.answerCell.empty();I.showCell.removeClass("hidden");I.replyCell.addClass("hidden");I.pointElement.html(Z);I.maxPointElement.html(Y);I.pointMeter.attr("value",Z);I.pointMeter.attr("max",Y);I.occurElement.html(w.get(S,"count"));$("button.show",I.showCell).trigger("focus")}function G(S){var T=S.id,R=w.get(T,"point")||0;I.answerCell.html(x(S,R<P?"en":"tlh"));I.showCell.addClass("hidden");I.replyCell.removeClass("hidden");$("button.hard",I.replyCell).trigger("focus")}function J(S,R){if(!arguments.length){I.helpElement.addClass("hidden");return}I.helpElement.html(S+" "+(R?p("nobr","(Key: "+R.split(" ").map(function(T){return p("kbd",T)}).join(" or ")+")"):""));I.helpElement.removeClass("hidden")}function L(U,V,R){var T=1,S=[];U.forEach(function(Z){var Y=V.query({id:Z})[0],X=w.get(Z,"count")||0,W=w.get(Z,"point")||0;S.push(p("tr",p("td",T)+p("td",Y.id)+p("td",W)+p("td",X),R));T+=1});return p("tbody",S.join(""))}function F(R,S,U){var T=p("table",p("tr",p("th","Num")+p("th","ID")+p("th","Score")+p("th","In Text"))+L([R],U,'class=n title="Currently displayed word"')+L(S.loop,U,'class=v title="Words being practiced now"')+L(S.main,U,'class=adv title="Words remaining to practice"'));I.table.html(T)}function O(S,T){var R=S.get();w.keys().map(function(U){w.set(U,"count",0)});return R.filter(function(U){return !T.has(U)}).map(function(U){var V=U.id;w.set(V,"count",U.count);return V})}function E(S){var R=S.id;w.set(R,"point",0);u.put(R)}function r(U,T){var S=U.id,R=(w.get(S,"point")||0)+T;w.set(S,"point",R);if(R<P+z){u.put(S)}else{A.known.add([U])}}function H(R){A.known.add([R])}function s(){I.questionCell.html(p("span","No words left to practice.","lang=en")+p("span","Inga ord kvar att träna på.","lang=sv"));I.answerCell.empty();I.showCell.addClass("hidden");I.replyCell.addClass("hidden");J()}function t(U,W){var R,V,T,S;if(U.count()===0){s();return}R=U.get();V=W.query({id:R})[0];T=U.count();S=A.glossary.length;$("section.practice .remaincount").html(T);$("section.practice .donecount").html(S-T);$("section.practice .totalcount").html(S);$("section.practice progress.total").attr("max",S);$("section.practice progress.total").attr("value",S-T);M(V);F(R,U,W);return V}function y(){u.reset(O(A.glossary,A.known));localStorage.setItem("deck",JSON.stringify(u));q=t(u,A.dict);J()}function v(){var R=w.get((q||{}).id,"point")||0;I.pointMeter.attr("value",R);I.pointElement.html(R);J()}$("button",I.showCell).on("click",function(){G(q)});$("button.fail",I.replyCell).on("click",function(){E(q);q=t(u,A.dict)});$("button.hard",I.replyCell).on("click",function(){r(q,1);q=t(u,A.dict)});$("button.easy",I.replyCell).on("click",function(){r(q,z);q=t(u,A.dict)});$("button.known",I.replyCell).on("click",function(){H(q);q=t(u,A.dict)});$("button.show",I.showCell).on("mouseenter focusin",function(){J("Picture the answer in your mind, then press <i><b>Show Answer</b></i> to see if remember correctly.","space")});$("button.fail",I.replyCell).on("mouseenter focusin",function(){var R=0;I.pointMeter.attr("value",R);I.pointElement.html(R);J("Press <i><b>Failed</b></i> if you didn’t get the answer right.","1")});$("button.hard",I.replyCell).on("mouseenter focusin",function(){var R=(w.get(q.id,"point")||0)+1;I.pointMeter.attr("value",R);I.pointElement.html(R);J("Press <i><b>Got It</b></i> if you got the answer right. – This is what you would normally do.","2")});$("button.easy",I.replyCell).on("mouseenter focusin",function(){var R=w.get(q.id,"point")||0;R=(R<z)?z:(z+P);I.pointMeter.attr("value",R);I.pointElement.html(R);J("Press <i><b>Too Easy</b></i> if you know the word <em>really well,</em> but still don’t want to dismiss it completely.","3")});$("button.known",I.replyCell).on("mouseenter focusin",function(){var R=z+P;I.pointMeter.attr("value",R);I.pointElement.html(R);J("Press <i><b>Known</b></i> if you know the word by heart, and never want to practice it again. – Only use this for words that you’ve forgotten to mark as <i>known</i> under the Glossary tab.","0")});$("button",I.replyCell).on("keydown",Q);$(k.body).on("focusin",function(R){if(!$(R.target).is(I.buttonElements)){v()}});I.buttonElements.on("mouseleave",v);I.tab.on("click",y)}var c;function o(r){var q=$(".status");clearTimeout(c);q.html(r);c=setTimeout(function(){q.html("")},1500)}function b(q){clearTimeout(c);$(".status").html(q)}function m(q){$("#log").append("<br>&gt;"+q)}function h(q){$("#errors").append("<li>"+q)}(function(){var w=(function(){var y={a:"a",b:"b",ch:"c",D:"d",e:"e",gh:"f",H:"g",I:"h",j:"i",l:"j",m:"k",n:"l",ng:"m",o:"n",p:"o",q:"p",Q:"q",r:"r",S:"s",t:"t",tlh:"u",u:"v",v:"w",w:"x",y:"y","'":"z","‘":"z","’":"z","0":"0","1":"1","2":"2","3":"3","4":"4","5":"5","6":"6","7":"7","8":"8","9":"9"};function x(z){return z.split(/(?=[abDeHIjmnopqQrStuvwy\'‘’]|[cg]h|ng|tlh|l(?!h))/)}return function(B){var D=(B.match(/\{(.*?)\}/)||[0,""])[1],C=(B.match(/^\[(\d+)/)||[0,0])[1],A=(B.match(/\}\s*\[(\d+)/)||[0,0])[1],z=(B.match(/\.(\d+)\]$/)||[0,0])[1];if(C<10){C="0"+C}if(A<10){A="0"+A}if(z<10){z="0"+z}return x(D).map(function(E){return y[E]||""}).join("")+"-"+[C,A,z].join("-")}}());function v(x){if(x.match(/[.!?]/)){return"sf"}if(x.match(/[,;:()]/)){return"sh"}return"ss"}function u(z,A){var x=[],y=z.split(/(<[^>]*>|&[^;]{1,10};|[^&<a-z\'\u2018\u2019]+)/i);y.forEach(function(B){if(B!==""){if(B.match(/^[a-z\'\u2018\u2019]/i)){x.push(l.word(B,A))}else{if(B[0]==="&"){x.push(l.string(B))}else{if(B[0]==="<"){if(!B.match(/^<\/?span\b/)){x.push(l.string(B))}}else{x.push(l.string(B,[v(B)]))}}}}});return x}function s(x){return x.map(function(y){var z;if(!y.parts){return y.text}z=y.parts.map(function(A){return A.parts.map(function(B){return B.text+"("+B.pos+")"}).join("&ndash;")});return'<span class="'+y.getTags().join(" ")+'" title="Part-of-Speech: '+(y.getTags().join(", ")||"N/A")+"\nBreakdown:\n    "+(z.join("\n    ")||"N/A")+'"><span>'+y.getText()+"</span></span>"}).join("")}function q(y,D){var z=[],x=y.get(),C={adverbial:"adv",conjunction:"conj",exclamation:"excl",name:"name",noun:"n","noun suffix type 1":"ns1","noun suffix type 2":"ns2","noun suffix type 3":"ns3","noun suffix type 4":"ns4","noun suffix type 5":"ns5",numeral:"num",pronoun:"pro","question word":"ques",verb:"v","verb prefix":"vp","verb suffix type 1":"vs1","verb suffix type 2":"vs2","verb suffix type 3":"vs3","verb suffix type 4":"vs4","verb suffix type 5":"vs5","verb suffix type 6":"vs6","verb suffix type 7":"vs7","verb suffix type 8":"vs8","verb suffix type 9":"vs9","verb suffix type rover":"vsr"},B={"«":{en:'<span class=noncanon title="Headword: Not found as headword in canon.">',sv:'<span class=noncanon title="Uppslagsord: Används inte som uppslagsord i kanon.">'},"»":{en:"</span>",sv:"</span>"},"<":{en:'<span class=canon title="Headword: Found as headword in kanon.">',sv:'<span class=noncanon title="Uppslagsord: Används som uppslagsord i kanon.">'},">":{en:"</span>",sv:"</span>"}},A=p("tr",p("th","",'title="How many times word the occured in the text"')+p("th",p("span","Klingon",'lang=en title="Klingon word"')+p("span","Klingonska",'lang=sv title="Klingonskt ord"'))+p("th",p("span","Type",'lang=en title="Word type / Part-of-speech"')+p("span","Typ",'lang=sv title="Ordtyp / Ordklass"'))+p("th","English",'lang=en title="English translation"')+p("th","Svenska",'lang=sv title="Svensk översättning"'));if(x.length===0){return p("tbody",p("tr",p("td","There is nothing to see here (yet).","lang=en")+p("td","Det finns inget att visa här (än).","lang=sv")))}z=x.map(function(H){var J=C[H.pos]||"Huh?",I=H.tlh.replace(/\{(.*)\}/,function(L,K){return p("b",K.replace(/[\'‘’]/g,"’"),"lang=tlh")}),F=H.en.replace(/[«»<>]/g,function(K){return B[K].en}),E=H.sv.replace(/[«»]/g,function(K){return B[K].sv}),G=y.count(H);return p("tr",p("td",G,"class=count")+p("td",I,'sorttable_customkey="'+w(H.tlh)+'"')+p("td",J,"class=pos")+p("td",F,'lang=en sorttable_customkey="'+H.en.replace(/[«»<>]/g,"").toLowerCase()+'"')+p("td",E,'lang=sv sorttable_customkey="'+H.sv.replace(/[«»<>]/g,"").toLowerCase()+'"'),'class="'+J+(D&&D.has(H)?" known":"")+'" data-num='+H.num)});return p("thead",A)+p("tbody",z.join(""))}function r(y,x,z){y.empty().html(q(x,z));sorttable.makeSortable(y.get(0))}function t(x,y,A){var z=[];y.forEach(function(C){var B={};C.parts.forEach(function(E){var F=E.root.pos,D=E.root.text;if(F===undefined||D===undefined){return}if(!B[F]){B[F]=true;[].push.apply(z,A.query({tlh:D,pos:F}))}})});x.clear().add(z)}$(function(){var C,J,D,K,B=$("section.glossary table"),F=$("section.known    table"),I=$("button.analyze"),G=a({name:"inputText",saveDelay:1000,msgDelay:1500,inputElement:$("section.input div.input"),lengthElement:$("section.input .wordcount"),statusElement:$("section.input .state")});function y(N,M,O){var L=Math.round(((M-N)/M)*1000)/10;return N+" unknown (of "+M+") – "+L+"% of "+O+" known"}function E(){G.set("");I.triggerHandler("click")}function H(){G.set("ghIq ngotlhwI' yIqel. (maw'be'; Hov leng tIvqu' neH). roD DujHeyDaq yo'HeyDaq ghap ghom. patlh ghaj yaSDaj, 'ej batlh cha'maHlogh Qapchugh lunumlu'. tlhIngan nugh, tIgh je neH qel jeSwI'pu'vam. tlhIngan Hol qelchugh, Holna' 'oHbe'. bachbe'bogh nISwI' HIchHey rur. nISwI' lo'DI' bach 'e' lupIHbe'; Hol lo'DI' Qum 'e' lupIHbe' je. Quj tIvbej ghommeyvam, 'ach tlhIngan Hol Dun tIvbe'bej. Hol lughojmo' pop yajchu' jatlhwI' tlhInganmeyHeywI'Daq ghIpDIjtaHDI' bIHe'So' HInughI'chu'!");I.triggerHandler("click")}function A(){var M=u(G.text,J),L=M.filter(function(N){return(N.parts?true:false)});t(D,L,C);G.set(s(M),L.length).save();$('nav.pagetabs [href="#input"]').trigger("click")}function z(N){var M=$(N.target).closest("tr[data-num]"),L=M.data("num");if(L!==undefined){if(M.hasClass("known")){K.remove(C.query({num:L}));M.removeClass("known")}else{K.add(C.query({num:L}));M.addClass("known")}r(F,K)}}function x(L){J=f(L);D=n({dict:L,name:"glossary"});K=n({dict:L,name:"knownWords"});o('<a href="../dict/dict.zdb">Dictionary</a> loaded.');d({glossary:D,known:K,dict:L});$('nav.pagetabs [href="#input"]').on("click",function(){$(".glosscount").html(D.length)});$('nav.pagetabs [href="#glossary"]').on("click",function(){var M=D.length,N=D.get().filter(function(O){return !K.has(O)}).length;$("section.glossary .stats").html(y(N,M,"text"));r(B,D,K)});$('nav.pagetabs [href="#known"]').on("click",function(){var M=(L.query({num:-1})[0]||{num:0}).num,N=M-K.length;$("section.known .stats").html(y(N,M,"dictionary"));r(F,K)});if(D.length>0){r(B,D,K)}B.addClass("sortable").on("click",z);F.addClass("sortable");I.prop("disabled",false).on("click",A);$("button.clear").prop("disabled",false).on("click",E);$("button.test").prop("disabled",false).on("click",H);$("input.more").on("click",function(){if($(this).prop("checked")){$(".advanced").removeClass("hidden")}else{$(".advanced").addClass("hidden")}});$("nav.pagetabs .selected").trigger("click")}C=g("../dict/dict.zdb",x)})}());(function(){var t="# http://klingonska.org"+location.pathname+"\n",z=new RegExp("^"+t.replace(/\//g,"\\/")),A=$('[role="main"] > .storage'),x=(function(){var D,B=$("span",A);function C(){return B.empty()}return{show:function(F,E){clearTimeout(D);C().removeClass("hidden").html(F);if(E){D=setTimeout(C,E*1000)}return B},hidden:function(E){C().addClass("hidden").html(E);return B}}}());function q(){var B,C=[];for(B=0;B<localStorage.length;B+=1){C.push(localStorage.key(B))}return C.sort()}function w(){var B=q().map(function(D){var E=localStorage.getItem(D);try{E=JSON.stringify(JSON.parse(E),null,4)}catch(C){}return p("tr",p("th",p("pre",D)+p("button","Clear",'data-key="'+D+'"'))+p("td",p("pre",E)))});$(".storage table").empty().html(p("thead",p("tr",p("th","Key")+p("th","Value")))+p("tbody",B.join("")));$(".storage table button").on("click",function(){var D=$(this),C=D.data("key");localStorage.removeItem(C);D.closest("tr").remove();x.show("Deleted property ‘"+C+"’.",3)})}function r(){var C={},B="";q().forEach(function(E){var F=localStorage.getItem(E);try{F=JSON.parse(F)}catch(D){}C[E]=F});B=t+JSON.stringify(C,null,2);return new Blob([B],{type:"application/octet-stream"})}function y(){var C=new Date(),B=[C.getFullYear(),C.getMonth()+1,C.getDate(),C.getHours(),C.getMinutes(),C.getSeconds()];return"0-1-2_3-4-5".replace(/\d/g,function(D){return B[D]<9?"0"+B[D]:B[D]})}function s(C){var B=k.createEvent("MouseEvents");B.initMouseEvent("click",true,true,j,1,0,0,0,0,false,false,false,false,0,null);C.get(0).dispatchEvent(B)}function u(){var C,D,B=y()+".state.txt";C=j.URL.createObjectURL(r());D=x.hidden('<a href="'+C+'" download="'+B+'">'+B+"</a>");s($("a",D));setTimeout(function(){j.URL.revokeObjectURL(C)},10000)}function v(D){var B,C=D.target.files[0];if(C.type==="text/plain"){B=new FileReader();B.onloadend=function(G){var F=G.target.result;try{if(!F.match(z)){throw new TypeError("Unknown file format")}F=F.replace(z,"");F=JSON.parse(F);$.each(F,function(H,I){localStorage.setItem(H,(typeof I==="object"?JSON.stringify(I):I))});w();x.show("File loaded successfully.",3)}catch(E){x.show("Failed to read file: "+E.message,10)}};B.readAsText(C)}}$('nav.pagetabs [href="#storage"]').on("click",w);$("button.download",A).on("click",u);$("button.upload",A).on("click",function(){$('.storage input[type="file"]').trigger("click")});$("input",A).on("change",v);$("button.clear",A).on("click",function(){localStorage.clear()});$(function(){j.URL=j.URL||j.webkitURL;var B=[];if(!j.URL){B.push("<i>blob urls</i> (required for downloading)");$("button.download",A).prop("disabled",true).attr("title","Missing browser support for this feature.")}if(!FileReader){B.push("<i>FileReader</i> (required for uploading)");$("button.upload",A).prop("disabled",true).attr("title","Missing browser support for this feature.")}if(B.length){$("p",A).html("Unfortunately your browser does not support "+B.join(", or ")+". <b>:’(</b>")}})}());$(function(){var u=" \u2013 "+k.title,t=null,r=$("nav.pagetabs > *"),s=r.eq(0).attr("href").slice(1),q={};r.each(function(){var y=$(this),x=y.attr("href").slice(1),w=$('[role="main"] > section.'+x);q[x]={tab:y,page:w}});function v(){var w=location.hash.slice(1),x=q[w];if(!x){if(typeof history.replaceState==="function"){j.history.replaceState(null,null,"#"+s)}x=q[s]}if(t){t.tab.removeClass("selected");t.page.addClass("hidden")}x.page.removeClass("hidden");x.tab.addClass("selected").trigger("click");k.title=w+u;t=x}$(j).on("hashchange",v);$(j).trigger("hashchange")})}(window,document));